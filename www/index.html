<html>
  <head>

 	<meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />

	<link rel="stylesheet" href="css/slidebars.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/navigation.css">
    <link rel="stylesheet" href="css/jquery.mobile.iscrollview.css"/>
    <link rel="stylesheet" href="css/jquery.mobile.iscrollview-pull.css"/>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css" >
	<link rel="stylesheet" href="css/animate.min.css">  <!-- Menu slide animation -->
	<link rel="stylesheet" href="css/slider.css">  <!-- Menu slide animation -->
	<link rel="stylesheet" href="css/list_post.css" >


	<link rel="stylesheet" href="css/responsive.css" >
  </head>


<body>
 <div class="app">
 	<div id="deviceready">
	  <div canvas="container">
		<div id="toolbar">

		 <div class="js-toggle-left-slidebar" id="sidebar_img">
		  <img  id = "sidebarbutton" src="img/sidebar.png">
		 </div>
		  <div id="title" >
				Weimar Mosche
		  </div>
		</div>


	   <div id="PageWrapper">
		  <div id="scroller">
					
					<!-- <ul id="thelist"><li>Pretty row 1</li></ul> -->

					<!-- Slider -->
			<section id="main-slider" class="no-margin">
						<div class="carousel slide">
							<ol class="carousel-indicators">
							<li data-target="#main-slider" data-slide-to="0" class="active"></li>
							<li data-target="#main-slider" data-slide-to="1"></li>
							<li data-target="#main-slider" data-slide-to="2"></li>
							<li data-target="#main-slider" data-slide-to="3"></li>

							</ol>
						<div class="carousel-inner">
							<div class="item active" style="background-image:url(img/slider/bg1.jpg)">
								<div class="container">
									<div class="row">
										<div class="col-xs-9 col-xs-offset-5 animation animated-item-4">
											<div class="slider-img">
												<img src="img/slider/img1.png" class="img-responsive">
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xs-9">
											<div id ="slider_content">
												<h1 class="animation animated-item-1">بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيم</h1>
												<h2 class="animation animated-item-2">As-Salam Alaykoum, <br> Welcome to Weimar Mosche.</h2>
											</div>
											
										</div>
									</div>
								</div>
							</div>
							<div class="item" style="background-image:url(img/slider/bg2.jpg)">
								<div class="container">

									<div class="row ">
										<div class="col-xs-9 col-xs-offset-5 animation animated-item-4">
											<div class="slider-img">
												<img src="img/slider/img2.png" class="img-responsive">
											</div>
										</div>
									</div>		
									<div class="row ">
										<div class="col-xs-9">
											<div id ="slider_content">
													<h1 class="animation animated-item-1">نَبِّئْ عِبَادِي أَنِّي أَنَا الْغَفُور الرَّحِيم</h1>
													<h2 class="animation animated-item-2">Inform my slaves that I, I am the Most Forgiving, the Most Merciful.
													</h2>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							<div class="item" style="background-image:url(img/slider/bg3.jpg)">
								<div class="container">
									<div class="row">
										<div class="col-xs-9 col-xs-offset-5 animation animated-item-4">
											<div class="slider-img">
												<img src="img/slider/img3.png" class="img-responsive">
											</div>
										</div>	
									</div>
									<div class="row">
										<div class="col-xs-9">
											<div id ="slider_content">
												<h1 class="animation animated-item-1">وَقَالَ رَبُّكُمُ ادْعُونِي أَسْتَجِبْ لَكُمْ</h1>
												<h2 class="animation animated-item-2">Your Lord says, ‘Call on me; I will respond to you.</h2>
											</div>
										</div>
										
									</div>
								</div>
							</div>
						</div>
						</div>
			</section>

			<div class="container">
			  <div class="center wow fadeInDown">

				<h2 style="text-align:center;"> Posts </h2>

				<!-- posts by category comes here -->
				<div id="posts">

			</div>
			</div>
		   </div>
		  </div>
		</div>

	
		<div id="footer" class="js-toggle-bottom-slidebar" >


			<img src="img/up.png">

		</div>
	 
	</div>

		<div off-canvas="slidebar-1 left reveal">
				<div id = "sidbarnav">
					<!-- sidebar menu loaded from server -->
				</div>
		</div>

		<div off-canvas="slidebar-4 bottom reveal" >
			<div id = "FootbarMenu">
				<!-- bottom menu loaded from server -->
			</div>
		</div>
 			
 		</div>
</div>


<!-- This is javascript scroll feature  -->
	<script type="text/javascript">

		var appscroll;
		function loaded() {
			appscroll = new iScroll('PageWrapper', { scrollbarClass: 'myScrollbar' });
		}

		document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

		document.addEventListener('DOMContentLoaded', loaded, false);

	
	</script>


	<!-- Javascript functions -->
	<script type="text/javascript">

	
	// logout 
	function logout(){

				// clear the storage
                window.localStorage.removeItem("key");
                window.localStorage.clear();
                window.location.href = "index.html";

	}

	function view_detail(postid) {

			   var keyName = window.localStorage.key(1);

               window.localStorage.setItem("postid", postid);

		       window.location.href = "detail.html";

	}

	function load_posts(cat_id){

		$.ajax({url: 'http://10.0.0.48/weimarmosche/server/webserver/get_posts.php',
			data: {category: cat_id},
            type: 'post',                  
            async: 'true',
            dataType: 'json',
            
            beforeSend: function() {
                // This callback function will trigger before data is sent
                console.log("post requesting..");
                },

            complete: function() {
                // This callback function will trigger on data sent/received complete
                console.log("posts completed");
                    },

            success: function (result) {
            	// if posts available to the category
            	if (typeof result.status === "undefined" && typeof result.wrong === "undefined") {
				   	var all_body_post ="";
				    for (i = 0; i < result.length; i++) {

				    	all_body_post +="<div class='row'><div class='thumbnail'>";

	   					all_body_post += "<div onclick=view_detail(" + result[i].title +")>";

	   					all_body_post += "<h3>" + result[i].title + "</h3>";

	   					all_body_post += "<p>";

	   					all_body_post += result[i].body;

	   					all_body_post += "</p>";

	   					all_body_post += "<img src='" + result[i].img_url +"' class='img-responsive' style='margin-left: auto; margin-right: auto;'>";
	   					all_body_post += "</div></div></div>"
					}
		
					// access the post div 
					var post_div = document.getElementById("posts");

					// insert the new elements in the post div
					post_div.innerHTML = all_body_post;



				} else {   // if something went wrong
				  
					
            		if (typeof result.status === "undefined") {// meaning there is no posts
            		}

            		else {

					var all_body_post ="<div class='row'><div class='thumbnail'>";
					all_body_post += "<p>";

					all_body_post += "There is no post for this category!" ;

					all_body_post += "</p>";


					all_body_post += "</div></div></div>"

					// access the post div 
					var post_div = document.getElementById("posts");

					// insert the new elements in the post div
					post_div.innerHTML = all_body_post;

            		}

            		if (typeof result.wrong === "undefined") {// meaning there is no posts

            		}
            		else {

					var all_body_post ="<div class='row'><div class='thumbnail'>";
					all_body_post += "<p>";

					all_body_post += "Something went wrong!" ;

					all_body_post += "</p>";


					all_body_post += "</div></div></div>"

					// access the post div 
					var post_div = document.getElementById("posts");

					// insert the new elements in the post div
					post_div.innerHTML = all_body_post;

            	}	

				}

            	
                
               
        	},

        	error: function (request,error) {
            	// This callback function will trigger on unsuccessful action  

                //alert('Network error has occurred please try again!');
                var all_body_post ="<div class='row'><div class='thumbnail'>";
					all_body_post += "<p>";

					all_body_post += "network Something went wrong!" ;

					all_body_post += "</p>";


					all_body_post += "</div></div></div>"

					// access the post div 
					var post_div = document.getElementById("posts");

					// insert the new elements in the post div
					post_div.innerHTML = all_body_post;
            }

        }); 

	}
	
	</script>

<!-- phonegap javascript -->
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="js/slidebars.js"></script>
<script src="js/scripts.js"></script>
<script src="js/scroll/iscroll.js?v4"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/menus.js"></script>


<script type="text/javascript">

$( document ).ready(function() {
    

// load sidebar menu
load_sidebar_menu();

// load bottom menu
load_bottom_menu();

// load posts
load_posts(0);




});

</script>

<script type="text/javascript">app.initialize(); </script>

  </body>
</html>
